DNS/BIND

The following assumes Ubuntu

Two very useful command line tools for looking up DNS resource records are "dig" and "whois". You really should be comfortable with these commands and interpreting their output.
$ sudo apt-get install dig whois

The BIND server is called "named" (as in "name daemon"). Also, named is VERY picky about config file syntax. If you mess up the syntax in a configuration file, THE DAEMON WILL NOT START.
You can troubleshoot this by running:
$ named-checkconf /etc/bind/named.conf

If you do have a syntax error, this command will print out the file, and line number where the error occurs, for example:
# named-checkconf /etc/bind/named.conf                                                                                                                                                      
/etc/bind/named.conf.local:12: expected quoted string near '/'

# vim /etc/bind/named.conf/local
Then in vim enter ":<line number>" ENTER.

You may need to use "tcpdump" to troubleshoot network issues.

Installation:
Ubuntu:
$ sudo apt-get install bind9 dnsutils

There are three ways to configure Bind9.
1) Caching Nameserver. This will resolve DNS queries and save the results in cache. This will speed up future DNS queries.
2) Primary Master Server. This type of name server is authoritative for its zone. It also is the final say in all DNS queries.
3) Secondary Master Server. Gets DNS records from the primary, but is also authoritative. This is neccessary for Redundancy.

Configuration File:

/etc/bind/named.conf

In "/etc/bind/named.conf.options" their is a "directory" directive. DNS looks for files relative to this directory.

CACHING NAMESERVER)

The default behavior for BIND is to act as a caching nameserver. Simply change the following lines in "/etc/bind/named.conf.options"

        // forwarders {
        //      0.0.0.0;
        // }

To point to your ISPs DNS servers (I am using OpenDNS servers).

	forwarders {
		208.67.222.222;
		208.67.220.220;
	}

Finally, restart named with 
$ sudo service bind9 restart

Enable bind9 at startup
(ubuntu)
$ sudo update-rc.d bind9 default
(Red Hat)
$ sudo systemctl enable named

PRIMARY MASTER NAMESERVER)
To make bind9 a primary nameserver. Assuming your domain is "example.com", add the following to "/etc/bind/named.conf.local"

    zone "example.com" {
        type master;
        file "/etc/bind/db.example.com;
    };

Copy the existing zone file (/etc/bind/db.local) as a template:
$ sudo cp /etc/bind/db.local /etc/bind/db.example.com

Edit "/etc/bind/db.example.com" accordingly:
    ;
    ; BIND data file for local loopback interface
    ;
    $TTL    604800
    @       IN      SOA     ns.example.com. ubuntu.example.com. (
                                  3         ; Serial
                             604800         ; Refresh
                              86400         ; Retry
                            2419200         ; Expire
                             604800 )       ; Negative Cache TTL
    ;
    @       IN      NS      ns.example.com
    @       IN      A       172.17.13.247
    @       IN      AAAA    fe80::42:acff:fe11:df7
    
    ; List other hosts on domain
    box IN A 172.17.0.1

You can now add records to the bottom of this zone file. Make sure to increment "Serial" every time you make a change to this zone file.
Finally, restart bind9.
$ sudo service bind9 restart


SECONDARY NAMESERVER)






resorces:

http://ubuntuforums.org/showthread.php?t=2166260
